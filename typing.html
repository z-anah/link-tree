<html>

<head>
    <style>
        .text-to-copy {
            color: rgb(191, 190, 190);
        }

        .text-typed {
            color: black;
        }

        .container {
            text-align: center;
            padding-top: 200px;
            font-size: xx-large;
        }

        table {
            margin: 0 auto;
            text-align: center;
        }


        .highlight {
            color: rgb(191, 190, 190);
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <div id="container" class="container">
        <div id="text-to-copy" class="text-to-copy">test</div>
        <br>
        <table>
            <tr>
                <td><button id="e_acute">é</button></td>
                <td><button id="e_grave">è</button></td>
            </tr>
            <tr class="text-to-copy">
                <td>1</td>
                <td>2</td>
            </tr>
        </table>
    </div>
    <script>
        let textToCopy = document.getElementById("text-to-copy");
        let container = document.getElementById("container");

        const e_acute_button = document.getElementById("e_acute");
        const e_grave_button = document.getElementById("e_grave");

        var iChar = 0;
        const words = [
            "Hélas",
            "Excellent",
            "Bravo",
            "Bon courage!",
            "Hélas",
        ];
        let iWords = 0;

        function styleIt(originalText, iChar) {
            return '<span class="text-typed">'
                + originalText.slice(0, iChar)
                + '</span>'
                + '<span class="highlight">'
                + originalText.charAt(iChar)
                + '</span>'
                + '<span class="text-to-copy">'
                + originalText.slice(iChar + 1)
                + '</span>';
        }

        function checkType(key) {
            if (key === originalText[iChar]) {
                var iCharPrim = iChar + 1;
                const newTextPrim = styleIt(originalText, iCharPrim);
                textToCopy.innerHTML = newTextPrim;
                iChar++;
                // const audioType = new Audio('https://github.com/z-anah/link-tree/blob/main/mixkit-single-key-type-2533.wav?raw=true');
                // audioType.play();
            }
            if (iChar === originalText.length) {
                setTimeout(function () {
                    iWords++;
                    iChar = 0;
                    iCharPrim = 0;
                    originalText = words[iWords];
                    newText = styleIt(originalText, iChar);
                    textToCopy.innerHTML = newText;
                    return;
                }, 250);
            }
        }

        let originalText = words[iWords];
        let newText = styleIt(originalText, iChar);
        textToCopy.innerHTML = newText;

        e_acute_button.addEventListener("click", function () {
            let key = "é";
            checkType(key);
        });

        e_grave_button.addEventListener("click", function () {
            let key = "è";
            checkType(key);
        });

        // Alternatively, you can use keydown event to detect when a key is pressed
        document.addEventListener("keydown", function (event) {
            let key = null;
            if (event.key === "1") {
                key = "é";
            } else if (event.key === "2") {
                key = "è";
            }
            checkType(key);
        });


        document.onkeydown = function (event) {
            let key = event.key;
            checkType(key);
        };
    </script>
</body>

</html>
