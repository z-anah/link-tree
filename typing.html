<html>

<head>
    <style>
        .text-to-copy {
            color: rgb(191, 190, 190);
        }

        .text-typed {
            color: black;
        }

        .container {
            text-align: center;
            padding-top: 200px;
        }

        .highlight {
            color: rgb(191, 190, 190);
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <div id="container" class="container">
        <div id="text-to-copy">
            <div class="text-to-copy">test</div>
        </div>
        <div id="text-typed"></div>
    </div>
    <script>
        let textToCopy = document.getElementById("text-to-copy");
        let textTyped = document.getElementById("text-typed");
        let container = document.getElementById("container");
        let iChar = 0;
        const words = [
            "bonjour",
            "Excellent",
            "Bravo",
            "Bon courage!",
            "Hélas",
        ];
        let iWords = 0;

        function styleIt(originalText, iChar) {
            return '<span class="text-typed">'
            + originalText.slice(0, iChar)
            + '</span>'
            + '<span class="highlight">'
            + originalText.charAt(iChar)
            + '</span>'
            + '<span class="text-to-copy">'
            + originalText.slice(iChar + 1)
            + '</span>';
        }

        let originalText = words[iWords];
        let newText = styleIt(originalText, iChar);
        textToCopy.innerHTML = newText;

        document.onkeydown = function (event) {
            let key = event.key;
            if (key === originalText[iChar]) {
                var iCharPrim = iChar + 1;
                const newTextPrim = styleIt(originalText, iCharPrim);
                textToCopy.innerHTML = newTextPrim;
                iChar++;
            }
            if (iChar === originalText.length) {
                iWords++;
                iChar = 0;
                iCharPrim = 0;
                originalText = words[iWords];
                newText = styleIt(originalText, iChar);
                textToCopy.innerHTML = newText;
                return;
            }
        };
        container.addEventListener("keydown", function (event) {
            let keyCode = event.keyCode;
            let altKey = event.altKey;
            if (altKey && (keyCode === 69 || keyCode === 73 || keyCode === 85 || keyCode === 79)) {
                let accent = "";
                switch (keyCode) {
                    case 69:
                        accent = "é";
                        break;
                    case 73:
                        accent = "î";
                        break;
                    case 85:
                        accent = "û";
                        break;
                    case 79:
                        accent = "ô";
                        break;
                }
                if (accent === text[iChar]) {
                    textTyped.textContent += accent;
                    iChar++;
                    if (iChar === text.length) {
                        alert("You typed all the text!");
                    }
                }
            }
        });
    </script>
</body>

</html>
